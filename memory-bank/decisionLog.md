# 設計決定ログ

## アーキテクチャ決定

### ADR-001: Feature-Sliced Design の採用

**日付**: 2024-03-21

**状態**: 採用

**コンテキスト**:
- スケーラブルなフロントエンドアーキテクチャが必要
- チーム間の共通言語が必要
- コードの再利用性と保守性の向上が必要

**決定**:
Feature-Sliced Design (FSD) アーキテクチャパターンを採用

**理由**:
- 明確な責任分離
- スケーラビリティの向上
- コードの再利用性の促進
- 依存関係の明確な制御

**影響**:
- より構造化されたコード組織
- 新機能追加時の明確なガイドライン
- チーム間のコミュニケーション改善

### ADR-002: TanStack Router の採用

**日付**: 2024-03-21

**状態**: 採用

**コンテキスト**:
- タイプセーフなルーティングが必要
- ファイルベースルーティングの実現
- パフォーマンスの最適化

**決定**:
TanStack Router を採用

**理由**:
- 型安全性の確保
- ファイルベースルーティングのサポート
- 優れたパフォーマンス特性
- ルート定義の自動生成

**影響**:
- 開発効率の向上
- 型の安全性向上
- ビルド時の最適化

### ADR-003: shadcn/ui + Tailwind CSS の採用

**日付**: 2024-03-21

**状態**: 採用

**コンテキスト**:
- 高品質な UI コンポーネントが必要
- カスタマイズ性の確保
- 保守性の高いスタイリング手法

**決定**:
shadcn/ui をベースに Tailwind CSS を採用

**理由**:
- 再利用可能なコンポーネント
- 高度なカスタマイズ性
- ユーティリティファーストアプローチ
- コピー＆ペースト可能なコンポーネント設計

**影響**:
- 一貫した UI デザイン
- 開発速度の向上
- カスタマイズの容易さ

### ADR-004: Mock Service Worker の採用

**日付**: 2024-03-21

**状態**: 採用

**コンテキスト**:
- バックエンド API のモックが必要
- 開発とテストの効率化
- オフライン開発のサポート

**決定**:
Mock Service Worker (MSW) を採用

**理由**:
- リアルな API モック
- Service Worker による透過的な実装
- テスト時の柔軟性
- localStorage との連携の容易さ

**影響**:
- 開発の独立性向上
- テストの信頼性向上
- オフライン開発の実現

### ADR-008: TanStack Form + Valibot の採用

**日付**: 2024-03-23

**状態**: 採用

**コンテキスト**:
- フォーム実装の単純化が必要
- バリデーションの型安全性が必要
- パフォーマンスの最適化が必要
- react-hook-form からの移行が必要

**決定**:
TanStack Form をフォームライブラリとして採用し、Valibot をバリデーションライブラリとして採用

**理由**:
1. TanStack Form
   - シンプルな API
   - 型安全性の向上
   - パフォーマンスの最適化
   - コンポーネント指向の設計
   - フィールドレベルの再レンダリング最適化

2. Valibot
   - 軽量なバンドルサイズ
   - 型推論の改善
   - カスタムバリデーションの容易さ
   - エラーメッセージの国際化対応

**影響**:
- フォーム実装の簡素化
- バリデーションロジックの統一
- パフォーマンスの向上
- バンドルサイズの最適化
- react-hook-form の依存関係除去

### ADR-009: フォームパターンの標準化

**日付**: 2024-03-23

**状態**: 採用

**コンテキスト**:
- 一貫したフォーム実装が必要
- 再利用可能なコンポーネントが必要
- バリデーションの標準化が必要
- アクセシビリティの確保が必要

**決定**:
共通のフォームパターンとコンポーネントを確立

**理由**:
- コードの再利用性向上
- 実装の一貫性確保
- メンテナンス性の向上
- アクセシビリティの標準化

**影響**:
- 開発効率の向上
- コードの品質向上
- ユーザー体験の改善
- テストの容易化

## 保留中の決定

### PENDING-001: E2E テストの範囲

**コンテキスト**:
- E2E テストの範囲と優先順位の決定が必要
- テスト実行時間とメンテナンスコストの検討

**検討事項**:
1. クリティカルパスのみのテスト
2. 全機能の E2E テスト
3. ハイブリッドアプローチ

**次のステップ**:
- テスト戦略の詳細な検討
- コスト対効果の分析
- チームでの議論と合意形成

### PENDING-002: 国際化対応

**コンテキスト**:
- 将来的な多言語対応の可能性
- i18n ライブラリの選定

**検討事項**:
1. react-intl
2. i18next
3. Lingui

**次のステップ**:
- 要件の明確化
- 各ライブラリの比較評価
- プロトタイプの作成
